<!DOCTYPE html>
<npdc:edit-button class="np-primary-control"></npdc:edit-button>
<npdc:loader ng-if="!document"></npdc:loader>

<leaflet ng-if="document && mapOptions" options="mapOptions" class="coverage-map"></leaflet>
<div ng-if="document" class="np-padding">
  <npdc-document:meta></npdc-document:meta>

<section>
  <h3>{{'Expedition' | t }}</h3>
  <md-divider></md-divider>

  <br /><p>{{'Title' | t }}: {{document.code}}  <p />
  <p>{{'Type' | t}}:  {{ (document.type) }} <p />
  <p>{{'Summary' | t}}: {{document.summary}}<p />
</section>


<section>
  <h3>{{'Platforms' | t }}</h3>
  <md-divider></md-divider>

  <ul>
    <div ng-if="document.platforms" ng-repeat="platform in document.platforms">
      <li>{{platform.type}}&nbsp;&nbsp;<span ng-if="platform.name">[{{platform.name}}&nbsp;{{platform.sponsor}}]
        </span></li>
    </div>
  </ul>
</section>

<section>
  <h3>{{ 'Activities' | t }}</h3>
  <md-divider></md-divider>
  <ul>
    <div ng-if="document.research" ng-repeat="research in document.research">
      <li>{{research.research_type}}:&nbsp;&nbsp;
    <span ng-if="research.research_title">{{research.research_title}}</span>
    [<span ng-repeat="topic in research.topics">{{topic}}<span ng-if="!$last">,&nbsp; </span></span>]</li>
  <!-- <span ng-if="research.topics">[<span ng-repeat="topic in research.topics">&nbsp;{{topic}}&nbsp;</span>]</span> </li>  -->
    </div>
  </ul>
</section>



  <section ng-if="document.people && document.people.length > 0">
  <h3>{{ 'People' | t }}</h3>
  <md-divider></md-divider>
  <md-list>
    <md-list-item class="md-2-line" ng-repeat="person in document.people">
      <md-icon class="md-avatar-icon">person</md-icon>
        <div class="md-list-item-text">
          <h3> {{ person.first_name }} {{ person.last_name }} </h3>
          <p ng-if="person.organisation">{{ person.organisation }},&nbsp;{{ person.country }}</p>
          <p ng-if="person.roles"><span ng-repeat="r in person.roles">{{ r }}<span ng-if="!$last">, </span></span></p>
          <p ng-if="person.expedition_dates"><span ng-repeat="t in person.expedition_dates">{{ (t.start_date).substr(0,10) }}&nbsp;-&nbsp;{{ (t.start_date).substr(0,10) }}</p>
        </div>
      </md-list-item>
    </md-list>
</section>


<section ng-if="document.activity && document.activity.length > 0">
  <h3>{{ 'Travel' | t}}</h3>
  <md-divider></md-divider>

  <ul>
    <div  ng-repeat="activity in document.activity">
      <li>
        {{'Departure' | t}}:&nbsp;{{activity.departure_return_dates.start_date.substr(0,10)}} &nbsp;&nbsp;{{activity.departure_placename}},&nbsp;{{activity.departure_country}}  ({{activity.departure_predefined_area}}) &nbsp;latitude:{{activity.departure_gps.latitude}},&nbsp;longitude:{{activity.departure_gps.longitude}} <br />
        {{ 'Arrival' | t }}:&nbsp;{{activity.departure_return_dates.end_date.substr(0,10)}}&nbsp;&nbsp;{{activity.return_placename}}, &nbsp;{{activity.return_country}}&nbsp;({{activity.return_predefined_area}}) &nbsp;latitude:{{activity.return_gps.latitude}},&nbsp;longitude:{{activity.return_gps.longitude}}
        <br /><br />

      </li>
    </div>
  </ul>
</section>

<section>
   <h3>{{ 'Locations' | t }}</h3>
    <md-divider></md-divider>

  <ul>
    <div ng-if="document.locations" ng-repeat="location in document.locations">
      <li>
        {{ 'Location' | t }}:&nbsp;{{location.location_dates.start_date.substr(0,10)}} &nbsp;&nbsp;{{location.location_dates.end_date.substr(0,10)}}&nbsp;&nbsp; {{location.placename}},&nbsp;{{location.area}},&nbsp;{{location.country}}&nbsp;({{location.predefined_area}})
        <div ng-if="location.field_camp">field camp</div>
        <div ng-if="location.operation_area">operational area</div>
        gps:&nbsp;&nbsp; {{location.gps.north}}&nbsp;&nbsp;{{location.gps.east}}&nbsp;&nbsp;{{location.gps.south}}&nbsp;&nbsp;{{location.gps.west}}
        <br /><br />

      </li>
    </div>
  </ul>
</section>


<section>
<h3>{{ 'Classification' | t }}</h3>
<md-divider></md-divider>
 <div ng-if="document.tags">
          <h4>{{ 'Tags' | t }}</h4>
          <p>
            <md-icon>label_outline</md-icon><span ng-repeat="tag in document.tags">
              <a ng-href="?q=&filter-tags={{tag}}">{{ tag }}</a>{{!$last ? ' / ':''}}
            </span>
          </p>
        </div>
 </section>

<section>
  <h3>{{'Links' | t }}</h3>
   <md-divider></md-divider>
  <ul>
    <div ng-if="document.links" ng-repeat="link in document.links">
      <li>
        <a href="{{link.href}}">{{link.title}}</a>
      </li>
    </div>
  </ul>
</section>


</div>
